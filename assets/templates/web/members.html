{{ define "content" }}
	<h1>Members of {{ .RFC5322AddrSpec }}</h1>
	<form action="" method="post">
		<div class="form-group">
			<label>Email addresses (one RFC 5322 address-list per line)</label>
			<textarea name="emails" class="form-control" placeholder="Email addresses"></textarea> <!-- TODO is not preserved across errors at the moment -->
		</div>
		<div class="form-group form-check">
			<input class="form-check-input" type="checkbox" id="send_welcome_goodbye" name="send_welcome_goodbye" checked> <!-- TODO is not preserved across errors at the moment -->
			<label class="form-check-label" for="send_welcome_goodbye">
				Send welcome/goodbye email
			</label>
		</div>
		<button name="add" value="1" type="submit" class="btn btn-primary">Add up to 10000 members</button> <!-- TODO DatabaseBatchLimit -->
		<button name="remove" value="1" type="submit" class="btn btn-danger">Remove up to 10000 members</button> <!-- TODO DatabaseBatchLimit -->
	</form>
	<hr>
	<p>The list has {{ len .Members}} members.</p>
	{{ with .Members }}
		<table class="table">
			<thead>
				<tr>
					<th>Address</th>
					<th>Receive mails</th>
					<th>Moderate</th>
					<th>Notify on moderation</th>
					<th>Admin</th>
					<th></th>
				</tr>
			</thead>
			<tbody>
				{{ range . }}
				<tr id="{{ .EscapeMemberAddress }}">
					<td><address>{{ .MemberAddress }}</address></td><!-- some language processors mess up email addresses, hope that the address tag prevents that -->
					<td>{{ if .Receive  }}yes{{ else }}no{{ end }}</td>
					<td>{{ if .Moderate }}yes{{ else }}no{{ end }}</td>
					<td>{{ if .Notify   }}yes{{ else }}no{{ end }}</td>
					<td>{{ if .Admin    }}yes{{ else }}no{{ end }}</td>
					<td><a href="/members/{{ $.EscapeAddress }}/{{ .EscapeMemberAddress }}">Edit</a></td>
				</tr>
				{{ end }}
			</tbody>
		</table>
	{{ end }}
{{ end }}
